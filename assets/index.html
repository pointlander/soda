<html>
 <head>
  <title>Soda</title>
  <style>
   table td, table td * {
       vertical-align: top;
   }
  </style>
 </head>
 <body>
  <table>
   <tr>
    <td>
     <form id="form">
      <textarea id="query" rows="20" cols="80"></textarea>
      <pre id="text"></pre><br/>
      <input type="submit"/>
     </form>
    </td>
    <td>
     <textarea id="bible" rows="40" cols="80"></textarea>
    </td>
   </tr>
  </table>
  <script type="text/javascript">
   fetch("/bible",
   {
    method: "GET"
   })
   .then(function(response){ 
    return response.text(); 
   })
   .then(function(data){ 
    document.getElementById('bible').value = data;
   });    
   function submit(event) {
    event.preventDefault();
    query = document.getElementById('query').value;
    fetch("/infer",
    {
     method: "POST",
     body: query
    })
    .then(function(response){ 
     return response.text(); 
    })
    .then(function(data){ 
     document.getElementById('text').innerHTML = data;
    });
    return false;
   }
   var form = document.getElementById("form");
   form.addEventListener('submit', submit);
  </script>
 </body>
</html>
